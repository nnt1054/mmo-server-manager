{"version":3,"sources":["../../mini5-engine/build/index.js","ui/logo.svg","../../mini5-engine/build/engine.js","../../mini5-engine/build/scene.js","../../mini5-engine/build/gameObject.js","store/reducers/counterSlice.js","store/reducers/playerStateSlice.js","ui/App.js","store/store.js","game/gameObjects/backgroundObject.js","game/gameObjects/blockObject.js","game/gameObjects/playerObject.js","game/gameObjects/otherPlayerObject.js","game/gameObjects/portalObject.js","game/gameObjects/bouncingBallObject.js","game/gameObjects/playerManager.js","game/gameObjects/inputManager.js","game/scenes/index.js","game/scenes/testScene.js","game/scenes/baseScene.js","game/main.js","index.js"],"names":["Object","defineProperty","exports","value","enumerable","get","_engine","_scene","_gameObject","_interopRequireDefault","require","obj","__esModule","module","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","configurable","writable","key","MainLoop","_default","engine","sceneList","arguments","undefined","initScene","args","mode","this","currentScene","nextScene","global","console","log","window","createCanvas","update","bind","draw","begin","end","protoProps","staticProps","canvas","document","getElementById","context","getContext","fpsCounter","fpsValue","width","height","mouseEvents","addEventListener","event","x","offsetLeft","y","offsetTop","mousePos","preventDefault","keyState","keyPress","keyUpdateCounter","keyCode","scene","delta","interpolationPercentage","clearRect","fps","panic","setUpdate","setBegin","setEnd","start","setDraw","prototype","gameObjects","layerOrder","layers","intervals","gameState","setup","clearInterval","switchScene","curLayer","j","_createClass","gameObject","parent","_isClicked","AABB","aabb","_isClickTarget","clickTarget","pointInAABB","clickOffsetLeft","getMousePos","clickAABB","min","clickOffsetTop","point","max","lastPos","anchor","anchorPos","anchorees","foundCollisions","updateAnchorees","canvasPos","push","pos","setAnchorPos","aabbList","collisions","checkCollision","counterSlice","createSlice","name","initialState","reducers","increment","state","decrement","incrementByAmount","action","payload","actions","selectCount","counter","playerStateSlice","status","position","setPlayerState","setPlayerPosition","getPlayerState","playerState","getPlayerPosition","Counter","count","useSelector","dispatch","useDispatch","aria-label","onClick","PlayerStateUI","playerPosition","App","className","Component","configureStore","reducer","counterReducer","playerStateReducer","backgroundObject","fillStyle","fillRect","GameObject","blockObject","createAABB","color","playerObject","xVel","yVel","gravity","jump","jumpTimer","jumpDelay","colors","newCount","handleCountListener","handleCountUpdate","countUnsubscribe","store","subscribe","inputState","inputManager","sendUpdate","getState","yDisp","xDisp","xState","yState","Math","pow","setPos","checkCollisions","staticObjects","handleCollision","portalObjects","round","socket","emit","handleYCollision","handleXCollision","ifTopCollision","ifLeftCollision","textAlign","font","fillText","otherPlayerObject","username","connected","portalObject","bouncingBallObject","posAABB","radius","speed","velocity","direction","lastUpdate","circle","beginPath","arc","PI","fill","lineWidth","stroke","playerManagerObject","connectedPlayers","inputManagerObject","prev_xState","prev_yState","background","ground","floating","ball","player","portal","playerManager","on","data","Scene","game","Engine","SceneList","process","a","starting_scene","Game","forceSwitchScene","prompt","url","setup_websocket","updateSocket","ReactDOM","render","StrictMode","fetch","response","json","pathname","io","origin","path","query","sceneFadeOut","scene_name","tempUrl","newSocket","oldSocket","close","main"],"mappings":"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","file":"static/js/main.bf2335f7.chunk.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Engine\", {\n  enumerable: true,\n  get: function get() {\n    return _engine[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"Scene\", {\n  enumerable: true,\n  get: function get() {\n    return _scene[\"default\"];\n  }\n});\nObject.defineProperty(exports, \"GameObject\", {\n  enumerable: true,\n  get: function get() {\n    return _gameObject[\"default\"];\n  }\n});\n\nvar _engine = _interopRequireDefault(require(\"./engine.js\"));\n\nvar _scene = _interopRequireDefault(require(\"./scene.js\"));\n\nvar _gameObject = _interopRequireDefault(require(\"./gameObject\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar MainLoop = require('mainloop.js');\n\nvar MODE_LOCAL = 'local';\nvar MODE_SERVER = 'server';\nvar MODE_CLIENT = 'client';\n\nvar engine = /*#__PURE__*/function () {\n  function engine() {\n    var sceneList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var initScene = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var args = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var io = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n    var mode = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'local';\n\n    _classCallCheck(this, engine);\n\n    this.sceneList = sceneList;\n    this.currentScene = new this.sceneList[initScene](this, args);\n    this.nextScene = null;\n    this.global = {};\n    this.mode = mode;\n    console.log('this is the mode! ' + this.mode);\n\n    if (this.mode == MODE_LOCAL || this.mode == MODE_CLIENT) {\n      window.engine = this; //might want to change this later\n\n      this.createCanvas();\n    }\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n    this.begin = this.begin.bind(this);\n    this.end = this.end.bind(this);\n  }\n\n  _createClass(engine, [{\n    key: \"createCanvas\",\n    value: function createCanvas() {\n      // create Canvas and Initial Game Objects \n      this.canvas = document.getElementById('canvas'), this.context = this.canvas.getContext('2d'), this.fpsCounter = document.getElementById('fpscounter'), this.fpsValue = document.getElementById('fpsvalue'); // this.canvas.width = window.innerWidth;\n      // this.canvas.height = window.innerHeight;\n\n      this.canvas.width = 800;\n      this.canvas.height = 400; // MOUSE INPUT PROCESSOR\n\n      this.mouseEvents = {};\n      this.canvas.addEventListener('click', function (event) {\n        window.engine.mouseEvents['click'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n      }, false);\n      this.canvas.addEventListener('dblclick', function (event) {\n        window.engine.mouseEvents['dblclick'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n      }, false);\n      this.canvas.addEventListener('mousemove', function (event) {\n        window.engine.mouseEvents['mousemove'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n        window.engine.mousePos = window.engine.mouseEvents['mousemove'];\n      }, false);\n      this.canvas.addEventListener('mousedown', function (event) {\n        window.engine.mouseEvents['mousedown'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n      }, false);\n      this.canvas.addEventListener(\"contextmenu\", function (event) {\n        event.preventDefault();\n      }, false);\n      document.addEventListener('mouseup', function (event) {\n        window.engine.mouseEvents['mouseup'] = {\n          'x': event.x - event.target.offsetLeft,\n          'y': event.y - event.target.offsetTop\n        };\n      }, false); // KEYBOARD INPUT PROCESSOR\n\n      this.keyState = {};\n      this.keyPress = {};\n      this.keyUpdateCounter = 0;\n      document.addEventListener(\"keydown\", function (event) {\n        if (!(event.keyCode in window.engine.keyState)) {\n          window.engine.keyState[event.keyCode] = 0;\n        }\n\n        window.engine.keyUpdateCounter = 0;\n      });\n      document.addEventListener(\"keyup\", function (event) {\n        window.engine.keyPress[event.keyCode] = window.engine.keyState[event.keyCode]; // console.log(event.keyCode + ': ' + Math.round(window.engine.keyPress[event.keyCode]));\n\n        delete window.engine.keyState[event.keyCode];\n      });\n    }\n  }, {\n    key: \"switchScene\",\n    value: function switchScene(scene, args) {\n      this.nextScene = new this.sceneList[scene](this, args);\n    } // to do: change this later\n\n  }, {\n    key: \"forceSwitchScene\",\n    value: function forceSwitchScene(scene, args) {\n      this.currentScene = new this.sceneList[scene](this, args);\n    }\n  }, {\n    key: \"update\",\n    value: function update(delta) {\n      // 1. initialize gameStateUpdate\n      // this.gameStateUpdate = {};\n      // 2. Update Game Objects\n      if (this.currentScene) {\n        this.currentScene.update(delta);\n      } // 3. Check Physics Collisions\n      // 4. Reset mouseEvent and keyPress Dictionaries (if client)\n\n\n      this.mouseEvents = {};\n      this.keyPress = {};\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(interpolationPercentage) {\n      if (this.currentScene) {\n        this.context.clearRect(0, 0, canvas.width, canvas.height);\n        this.currentScene.draw(interpolationPercentage);\n      }\n    }\n  }, {\n    key: \"begin\",\n    value: function begin() {// check and process input\n    }\n  }, {\n    key: \"end\",\n    value: function end(fps, panic) {\n      // check for scene transition\n      if (this.nextScene) {\n        this.currentScene = this.nextScene;\n        this.nextScene = null;\n      } // calculate fps\n      // this.fpsCounter.textContent = Math.round(fps) + ' FPS';\n      // if (panic) {\n      //     var discardedTime = Math.round(MainLoop.resetFrameDelta());\n      //     console.warn('Main loop panicked, probably because the browser tab was put in the background. Discarding ' + discardedTime + 'ms');\n      // }\n\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.mode == MODE_SERVER) {\n        MainLoop.setUpdate(this.update).setBegin(this.begin).setEnd(this.end).start();\n      } else {\n        MainLoop.setUpdate(this.update).setDraw(this.draw).setBegin(this.begin).setEnd(this.end).start();\n      }\n    }\n  }]);\n\n  return engine;\n}();\n\nvar _default = engine;\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar scene = /*#__PURE__*/function () {\n  function scene(engine) {\n    var args = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, scene);\n\n    this.engine = engine;\n    this.canvas = this.engine.canvas;\n    this.gameObjects = [];\n    this.layerOrder = [];\n    this.layers = {};\n    this.intervals = [];\n    this.gameState = {};\n    this.setup(args);\n  }\n\n  _createClass(scene, [{\n    key: \"setup\",\n    value: function setup(args) {// instantiate game objects here and connect their object references\n      // this method is meant to be overridden, it's literally the only thing that needs to change besides like name\n    }\n  }, {\n    key: \"switchScene\",\n    value: function switchScene(scene, args) {\n      for (var i = 0; i < this.intervals.length; i++) {\n        clearInterval(this.intervals[i]);\n      }\n\n      console.log(this.intervals);\n      this.engine.switchScene(scene, args);\n    }\n  }, {\n    key: \"update\",\n    value: function update(delta) {\n      for (var i = 0; i < this.gameObjects.length; i++) {\n        this.gameObjects[i].update(delta);\n      }\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(interpolationPercentage) {\n      var curLayer;\n\n      for (var i = 0; i < this.layerOrder.length; i++) {\n        curLayer = this.layers[this.layerOrder[i]];\n\n        for (var j = 0; j < curLayer.length; j++) {\n          curLayer[j].draw(interpolationPercentage);\n        }\n      }\n    }\n  }]);\n\n  return scene;\n}();\n\nvar _default = scene; // try {\n// \tmodule.exports = scene;\n// } catch (err) {\n// \tconsole.log('scene export failed');\n// }\n\nexports[\"default\"] = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar gameObject = /*#__PURE__*/function () {\n  function gameObject(scene) {\n    var parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, gameObject);\n\n    this.scene = scene; // need this for object hiearchy\n\n    if (parent) {\n      this.parent = parent;\n    } else {\n      this.parent = scene;\n    }\n\n    this.update = this.update.bind(this);\n    this.draw = this.draw.bind(this);\n    this._isClicked = false;\n  }\n\n  _createClass(gameObject, [{\n    key: \"update\",\n    value: function update(delta) {\n      console.log('update should be overridden');\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(interpolationPercentage) {\n      console.log('update should be overridden');\n    }\n  }, {\n    key: \"createAABB\",\n    value: function createAABB(width, height) {\n      var x = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var y = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n      var parent = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n      return new AABB(width, height, x, y, parent);\n    }\n  }, {\n    key: \"allowClickDetection\",\n    value: function allowClickDetection(aabb) {\n      this._isClicked = false;\n      this._isClickTarget = this.scene.clickTarget === this;\n\n      if ('mousedown' in this.scene.engine.mouseEvents) {\n        if (this.pointInAABB(this.scene.engine.mouseEvents['mousedown'], aabb)) {\n          this.scene.clickTarget = this;\n          this.clickOffsetLeft = this.getMousePos().x - this.clickAABB.min.x;\n          this.clickOffsetTop = this.getMousePos().y - this.clickAABB.min.y;\n        }\n      }\n\n      if ('mouseup' in this.scene.engine.mouseEvents) {\n        if (this.scene.clickTarget === this) {\n          if (this.pointInAABB(this.scene.engine.mouseEvents['mouseup'], aabb)) {\n            this._isClicked = true;\n          }\n\n          this.scene.clickTarget = null;\n        }\n      }\n    }\n  }, {\n    key: \"isClicked\",\n    value: function isClicked() {\n      return this._isClicked;\n    }\n  }, {\n    key: \"isClickTarget\",\n    value: function isClickTarget() {\n      return this._isClickTarget;\n    }\n  }, {\n    key: \"getMousePos\",\n    value: function getMousePos() {\n      return this.scene.engine.mousePos;\n    }\n  }, {\n    key: \"pointInAABB\",\n    value: function pointInAABB(point, aabb) {\n      return point.x > aabb.min.x && point.x < aabb.max.x && point.y > aabb.min.y && point.y < aabb.max.y;\n    }\n  }]);\n\n  return gameObject;\n}();\n\nvar AABB = /*#__PURE__*/function () {\n  function AABB(width, height) {\n    var x = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var y = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    var parent = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n\n    _classCallCheck(this, AABB);\n\n    this.parent = parent;\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    this.lastPos = {\n      'x': x,\n      'y': y\n    };\n    this.anchor = null;\n    this.anchorPos = {\n      'x': 0,\n      'y': 0\n    };\n    this.anchorees = [];\n    this.foundCollisions = [];\n  }\n\n  _createClass(AABB, [{\n    key: \"setPos\",\n    value: function setPos() {\n      var x = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      if (x) {\n        this.lastPos.x = this.x;\n        this.x = x;\n      }\n\n      if (y) {\n        this.lastPos.y = this.y;\n        this.y = y;\n      }\n\n      this.updateAnchorees();\n    } // Called once at the beginning;\n\n  }, {\n    key: \"setAnchor\",\n    value: function setAnchor(aabb) {\n      this.anchor = aabb;\n      this.anchorPos = aabb.canvasPos;\n      aabb.anchorees.push(this);\n    }\n  }, {\n    key: \"setAnchorPos\",\n    value: function setAnchorPos(pos) {\n      this.anchorPos = pos;\n      this.updateAnchorees();\n    }\n  }, {\n    key: \"updateAnchorees\",\n    value: function updateAnchorees() {\n      // if anchor position changed, update positions of anchorees\n      for (var i = 0; i < this.anchorees.length; i++) {\n        this.anchorees[i].setAnchorPos(this.canvasPos);\n      }\n    }\n  }, {\n    key: \"checkCollision\",\n    value: function checkCollision(aabb) {\n      if (this.max.x <= aabb.min.x || this.min.x >= aabb.max.x) {\n        return false;\n      } else if (this.max.y <= aabb.min.y || this.min.y >= aabb.max.y) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"checkCollisions\",\n    value: function checkCollisions(aabbList) {\n      var collisions = [];\n\n      for (var i = 0; i < aabbList.length; i++) {\n        if (aabbList[i] == this) {\n          continue;\n        }\n\n        if (this.checkCollision(aabbList[i])) {\n          collisions.push(aabbList[i]);\n        }\n      }\n\n      return collisions;\n    } // Following Functions Assume Collision Exists with AABB\n\n  }, {\n    key: \"ifLeftCollision\",\n    value: function ifLeftCollision(aabb) {\n      return this.max.x > aabb.max.x;\n    }\n  }, {\n    key: \"ifLeftCollisionOnly\",\n    value: function ifLeftCollisionOnly(aabb) {\n      return this.max.x > aabb.max.x && this.min.x > aabb.min.x;\n    }\n  }, {\n    key: \"ifRightCollision\",\n    value: function ifRightCollision(aabb) {\n      return this.min.x < aabb.min.x;\n    }\n  }, {\n    key: \"ifRightCollisionOnly\",\n    value: function ifRightCollisionOnly(aabb) {\n      return this.min.x < aabb.min.x && this.max.x < aabb.max.x;\n    }\n  }, {\n    key: \"ifTopCollision\",\n    value: function ifTopCollision(aabb) {\n      return this.max.y > aabb.max.y;\n    }\n  }, {\n    key: \"ifTopCollisionOnly\",\n    value: function ifTopCollisionOnly(aabb) {\n      return this.max.y > aabb.max.y && this.min.y > aabb.min.y;\n    }\n  }, {\n    key: \"ifBottomCollision\",\n    value: function ifBottomCollision(aabb) {\n      return this.min.y < aabb.min.y;\n    }\n  }, {\n    key: \"ifBottomCollisionOnly\",\n    value: function ifBottomCollisionOnly(aabb) {\n      return this.max.y < aabb.max.y && this.min.y < aabb.min.y;\n    }\n  }, {\n    key: \"min\",\n    get: function get() {\n      return {\n        'x': this.x,\n        'y': this.y\n      };\n    }\n  }, {\n    key: \"max\",\n    get: function get() {\n      return {\n        'x': this.x + this.width,\n        'y': this.y + this.height\n      };\n    }\n  }, {\n    key: \"canvasPos\",\n    get: function get() {\n      return {\n        'x': this.x + this.anchorPos.x,\n        'y': this.y + this.anchorPos.y\n      };\n    }\n  }]);\n\n  return AABB;\n}();\n\nvar _default = gameObject; // try {\n//   \tmodule.exports = gameObject;\n// } catch (err) {\n// \t  console.log('gameObject export failed');\n// }\n\nexports[\"default\"] = _default;","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nexport const counterSlice = createSlice({\r\n  name: 'counter',\r\n  initialState: {\r\n    value: 0\r\n  },\r\n  reducers: {\r\n    increment: state => {\r\n      // Redux Toolkit allows us to write \"mutating\" logic in reducers. It\r\n      // doesn't actually mutate the state because it uses the immer library,\r\n      // which detects changes to a \"draft state\" and produces a brand new\r\n      // immutable state based off those changes\r\n      state.value += 1\r\n    },\r\n    decrement: state => {\r\n      state.value -= 1\r\n    },\r\n    incrementByAmount: (state, action) => {\r\n      state.value += action.payload\r\n    }\r\n  }\r\n})\r\n\r\nexport const { increment, decrement, incrementByAmount } = counterSlice.actions\r\nexport const selectCount = state => state.counter.value;\r\n\r\nexport default counterSlice.reducer","import { createSlice } from '@reduxjs/toolkit'\r\n\r\nexport const playerStateSlice = createSlice({\r\n  name: 'playerState',\r\n  initialState: {\r\n    status: 'idle',\r\n    position: [0, 0],\r\n    // x: 0,\r\n    // y: 0,\r\n  },\r\n  reducers: {\r\n    setPlayerState: (state, action) => {\r\n    \tstate.status = action.payload\r\n    },\r\n    setPlayerPosition: (state, action) => {\r\n    \tstate.position = action.payload\r\n    },\r\n  }\r\n})\r\n\r\nexport const { setPlayerState, setPlayerPosition } = playerStateSlice.actions;\r\nexport const getPlayerState = state => state.playerState.status;\r\nexport const getPlayerPosition = state => state.playerState.position;\r\n\r\nexport default playerStateSlice.reducer;","import React, { Component, useState } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\n\nimport { useSelector, useDispatch } from 'react-redux';\nimport {\n  decrement,\n  increment,\n  selectCount,\n} from '../store/reducers/counterSlice';\nimport {\n  setPlayerState,\n  getPlayerState,\n  getPlayerPosition,\n} from '../store/reducers/playerStateSlice';\n\nfunction Counter() {\n  const count = useSelector(selectCount);\n  const dispatch = useDispatch();\n\n  return (\n    <div>\n      <h1> count: { count } </h1>\n      <button\n        aria-label=\"Increment value\"\n        onClick={() => dispatch(increment())}\n      > + </button>\n    </div>\n  )\n}\n\nfunction PlayerStateUI() {\n  const playerState = useSelector(getPlayerState);\n  const playerPosition = useSelector(getPlayerPosition);\n\n  return (\n    <div>\n      <h1> status: { playerState } </h1>\n      <h1> x: { playerPosition[0] } y: { playerPosition[1] } </h1>\n    </div>\n  )\n\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <h1> hello! </h1>\n        <Counter />\n        <PlayerStateUI />\n      </div>\n    );\n  }\n}\n\nexport default App;","import { configureStore } from '@reduxjs/toolkit';\nimport counterReducer from './reducers/counterSlice';\nimport playerStateReducer from './reducers/playerStateSlice';\n\nexport default configureStore({\n  reducer: {\n    counter: counterReducer,\n    playerState: playerStateReducer,\n  },\n});","import { GameObject } from 'mini5-engine';\r\n\r\nclass backgroundObject extends GameObject {\r\n\r\n    constructor(scene) {\r\n        super(scene)\r\n\t\tthis.parent.gameState['backgroundObject01'] = {}\r\n        this.gameState = this.parent.gameState['backgroundObject01'];\r\n        this.gameState = {x: 0, y: 1};\r\n    }\r\n\r\n  \tupdate(delta) {\r\n  \t}\r\n\r\n  \tdraw(interpolationPercentage) {\r\n        this.scene.engine.context.fillStyle = 'lightgreen';\r\n        this.scene.engine.context.fillRect(0, 0, this.scene.engine.canvas.width, this.scene.engine.canvas.height);\r\n  \t}\r\n\r\n}\r\n\r\nexport default backgroundObject;","import { GameObject } from 'mini5-engine';\r\n\r\nclass blockObject extends GameObject {\r\n\r\n\tconstructor(scene, width, height, x, y) {\r\n\t    super(scene)\r\n      \tthis.scene = scene;\r\n  \t\tthis.update = this.update.bind(this);\r\n  \t\tthis.draw = this.draw.bind(this);\r\n  \t\tthis.AABB = this.createAABB(width, height, x, y)\r\n  \t\tthis.color = 'blue';\r\n\t}\r\n\r\n\tupdate(delta) {\r\n\t}\r\n\r\n\tdraw(interpolationPercentage) {\r\n        this.scene.engine.context.fillStyle = this.color;\r\n        this.scene.engine.context.fillRect(this.AABB.min.x, this.AABB.min.y, this.AABB.width, this.AABB.height);\r\n\t}\r\n\r\n}\r\n\r\nexport default blockObject;","import { GameObject } from 'mini5-engine';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { default as store } from '../../store/store'\r\nimport { \r\n\tsetPlayerState,\r\n\tsetPlayerPosition,\r\n} from '../../store/reducers/playerStateSlice'\r\nimport {\r\n\tselectCount,\r\n\tincrement,\r\n} from '../../store/reducers/counterSlice'\r\n\r\nclass playerObject extends GameObject {\r\n\r\n\tconstructor(scene) {\r\n\t    super(scene)\r\n      \tthis.scene = scene;\r\n  \t\tthis.update = this.update.bind(this);\r\n  \t\tthis.draw = this.draw.bind(this);\r\n\r\n  \t\tthis.x = 64;\r\n  \t\tthis.y = 0;\r\n\r\n  \t\tthis.xVel = 10;\r\n  \t\tthis.yVel = 0;\r\n  \t\tthis.gravity = 0.005;\r\n  \t\tthis.jump = -1.5;\r\n  \t\tthis.jumpTimer = 0;\r\n  \t\tthis.jumpDelay = 1000;\r\n  \t\tthis.AABB = this.createAABB(64, 64, this.x, this.y)\r\n\r\n  \t\tthis.state = 'idle';\r\n  \t\tthis.colors = {\r\n  \t\t\t'jumping': 'red',\r\n  \t\t\t'walking': 'yellow',\r\n  \t\t\t'idle': 'blue',\r\n  \t\t}\r\n\r\n  \t\tthis.newCount = 0;\r\n  \t\tthis.count = 0;\r\n  \t\tconst handleCountListener = this.handleCountUpdate.bind(this);\r\n  \t\tthis.countUnsubscribe = store.subscribe(handleCountListener);\r\n\r\n  \t\tthis.inputState = this.scene.inputManager.inputState;\r\n  \t\tthis.sendUpdate = false;\r\n\t}\r\n\r\n\thandleCountUpdate() {\r\n\t\tthis.newCount = selectCount(store.getState());\r\n\t}\r\n\r\n\tupdate(delta) {\r\n\t\tvar w = 87,\r\n\t\t\ta = 65,\r\n\t\t\ts = 83,\r\n\t\t\td = 68,\r\n\t\t\tspace = 32,\r\n\t\t\txDisp = 0,\r\n\t\t\tyDisp = 0;\r\n\r\n\t\tswitch (this.inputState.xState) {\r\n\t\t\tcase 'idle':\r\n\t\t\t\txDisp = 0;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'movingLeft':\r\n\t\t\t\txDisp = -this.xVel;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'movingRight':\r\n\t\t\t\txDisp = this.xVel;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\tswitch (this.inputState.yState) {\r\n\t\t\tcase 'jumping':\r\n\t\t\t\tif (this.jumpTimer <= 0) {\r\n\t\t\t\t\tthis.yVel = this.jump;\r\n\t\t\t\t\tthis.jumpTimer = this.jumpDelay;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis.jumpTimer -= delta;\r\n\r\n\t\tif (this.yVel) {\r\n\t\t\tthis.state = 'jumping';\r\n\t\t} else if (xDisp) {\r\n\t\t\tthis.state = 'walking';\r\n\t\t} else {\r\n\t\t\tthis.state = 'idle';\r\n\t\t}\r\n\r\n\t\t// Resolve Physics Collisions\r\n\t\tthis.yVel += (this.gravity * delta);\r\n\t\tyDisp = (this.yVel * delta) + (this.gravity * Math.pow(delta, 2));\r\n\t\tthis.x += xDisp;\r\n\t\tthis.y += yDisp;\r\n\t\tthis.AABB.setPos(this.x, this.y);\r\n\t\tvar collisions = this.AABB.checkCollisions(this.scene.staticObjects);\r\n\t\tif (collisions.length > 0) {\r\n\t\t\tfor (var i = 0; i < collisions.length; i++) {\r\n\t\t\t\tvar aabb = collisions[i];\r\n\t\t\t\tthis.handleCollision(aabb, xDisp, yDisp);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Resolve Portal Collisions\r\n\t\tvar collisions = this.AABB.checkCollisions(this.scene.portalObjects);\r\n\t\tvar nextScene = null;\r\n\t\tif (collisions.length > 0) {\r\n\t\t\tfor (var i = 0; i < collisions.length; i++) {\r\n\t            nextScene = collisions[i].parent.nextScene\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (nextScene != null) {\r\n\t        // this.scene.switchScene(nextScene);\r\n\t        console.log(\"should switch to scene: \" + nextScene);\r\n\t\t}\r\n\r\n\t\tthis.count = this.newCount;\r\n\t\tstore.dispatch(setPlayerState(this.state));\r\n\t\tstore.dispatch(setPlayerPosition([ Math.round(this.x), Math.round(this.y)]));\r\n\t\tstore.dispatch(increment());\r\n\r\n\t\tif (this.sendUpdate && this.scene.engine === 'client') {\r\n\t\t\tthis.scene.engine.socket.emit('inputState', this.inputState);\r\n\t\t\t// // send stuff socket\r\n\t\t\t// setTimeout(()=>this.scene.engine.socket.emit('inputState', this.inputState), 100);\r\n\t\t\t// // console.log(this.inputState);\r\n\t\t\tthis.sendUpdate = false;\r\n\t\t}\r\n\r\n\t}\r\n\t// Resolves and sets AABB position based on colliding aabb, x-axis displacement, and y axis-displacement\r\n\thandleCollision(aabb, xDisp, yDisp) {\r\n\t\tif (xDisp > yDisp) {\r\n\t\t\tthis.AABB.setPos(this.x - xDisp, this.y)\r\n\t\t\tif (this.AABB.checkCollision(aabb)) {\r\n\t\t\t\tthis.handleYCollision(aabb);\r\n\t\t\t} else {\r\n\t\t\t\tthis.handleXCollision(aabb);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.AABB.setPos(this.x, this.y - yDisp)\r\n\t\t\tif (this.AABB.checkCollision(aabb)) {\r\n\t\t\t\tthis.handleXCollision(aabb);\r\n\t\t\t} else {\r\n\t\t\t\tthis.handleYCollision(aabb);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.AABB.setPos(this.x, this.y);\r\n\t}\r\n\r\n\t// helper function for handleCollision\r\n\thandleYCollision(aabb) {\r\n\t\tif (this.AABB.ifTopCollision(aabb)) {\r\n\t\t\tthis.y = aabb.max.y;\r\n\t\t} else {\r\n\t\t\tthis.y = aabb.min.y - this.AABB.height;\r\n\t\t\tthis.jumpTimer = 0;\r\n\t\t}\r\n\t\tthis.yVel = 0;\r\n\t}\r\n\t// helper function for handleCollision\r\n\thandleXCollision(aabb) {\r\n\t\tif (this.AABB.ifLeftCollision(aabb)) {\r\n\t\t\tthis.x = aabb.max.x;\r\n\t\t} else {\r\n\t\t\tthis.x = aabb.min.x - this.AABB.width;\r\n\t\t}\r\n\t}\r\n\r\n\tdraw(interpolationPercentage) {\r\n        this.scene.engine.context.fillStyle = this.colors[this.state];\r\n        this.scene.engine.context.fillRect(this.AABB.min.x, this.AABB.min.y, this.AABB.width, this.AABB.height);\r\n        this.scene.engine.context.fillStyle = \"black\";\r\n\t\tthis.scene.engine.context.textAlign = \"center\";\r\n        this.scene.engine.context.font = \"30px Comic Sans MS\";\r\n        this.scene.engine.context.fillText(\"THIS IS ME\", this.AABB.min.x + this.AABB.width/2, this.AABB.min.y - 10);\r\n\t}\r\n}\r\n\r\nexport default playerObject;","import { GameObject } from 'mini5-engine';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { default as store } from '../../store/store'\r\nimport { \r\n\tsetPlayerState,\r\n\tsetPlayerPosition,\r\n} from '../../store/reducers/playerStateSlice'\r\nimport {\r\n\tselectCount,\r\n\tincrement,\r\n} from '../../store/reducers/counterSlice'\r\n\r\nclass otherPlayerObject extends GameObject {\r\n\r\n\tconstructor(scene, username, parent) {\r\n\t    super(scene, parent)\r\n\t    this.username = username;\r\n      this.scene = scene;\r\n  \t\tthis.update = this.update.bind(this);\r\n  \t\tthis.draw = this.draw.bind(this);\r\n\r\n  \t\tthis.x = 64;\r\n  \t\tthis.y = 0;\r\n\r\n  \t\tthis.xVel = 10;\r\n  \t\tthis.yVel = 0;\r\n  \t\tthis.gravity = 0.005;\r\n  \t\tthis.jump = -1.5;\r\n  \t\tthis.jumpTimer = 0;\r\n  \t\tthis.AABB = this.createAABB(64, 64, this.x, this.y)\r\n\r\n  \t\tthis.state = 'idle';\r\n  \t\tthis.colors = {\r\n  \t\t\t'jumping': 'red',\r\n  \t\t\t'walking': 'yellow',\r\n  \t\t\t'idle': 'blue',\r\n  \t\t}\r\n      this.gameState = this.parent.gameState[this.username];\r\n\r\n\r\n  \t\tconsole.log('connecting: ' + username);\r\n\t}\r\n\r\n\tupdate(delta) {\r\n        this.gameState = this.parent.gameState[this.username];\r\n        if (!this.gameState.connected) {\r\n        \treturn;\r\n        }\r\n\t\tthis.AABB.setPos(this.gameState.x, this.gameState.y);\r\n\r\n\t}\r\n\r\n\tdraw(interpolationPercentage) {\r\n        if (!this.gameState.connected) {\r\n        \treturn;\r\n        }\r\n        this.scene.engine.context.fillStyle = this.colors[this.state];\r\n        this.scene.engine.context.fillRect(this.AABB.min.x, this.AABB.min.y, this.AABB.width, this.AABB.height);\r\n        this.scene.engine.context.fillStyle = \"black\";\r\n\t\t    this.scene.engine.context.textAlign = \"center\";\r\n        this.scene.engine.context.font = \"30px Comic Sans MS\";\r\n        this.scene.engine.context.fillText(this.username, this.AABB.min.x + this.AABB.width/2, this.AABB.min.y - 10);\r\n\t}\r\n}\r\n\r\nexport default otherPlayerObject;","import { GameObject } from 'mini5-engine';\r\n\r\nclass portalObject extends GameObject {\r\n\r\n\tconstructor(scene, nextScene, width, height, x, y) {\r\n\t    super(scene)\r\n      this.scene = scene;\r\n      this.nextScene = nextScene;\r\n  \t\tthis.update = this.update.bind(this);\r\n  \t\tthis.draw = this.draw.bind(this);\r\n  \t\tthis.AABB = this.createAABB(width, height, x, y, this)\r\n   \t\tthis.clickAABB = this.createAABB(width, height, x, y, this)\r\n  \t\tthis.color = 'yellow';\r\n\t}\r\n\r\n\tupdate(delta) {\r\n        // this.allowClickDetection(this.clickAABB);\r\n\r\n        // if (this.isClicked()) {\r\n        //     this.scene.switchScene(this.nextScene);\r\n        // }\r\n\t}\r\n\r\n\tdraw(interpolationPercentage) {\r\n        this.scene.engine.context.fillStyle = this.color;\r\n        this.scene.engine.context.fillRect(this.AABB.min.x, this.AABB.min.y, this.AABB.width, this.AABB.height);\r\n\t}\r\n\r\n}\r\n\r\nexport default portalObject;","import { GameObject } from 'mini5-engine';\r\n\r\nclass bouncingBallObject extends GameObject {\r\n  \r\n\r\n    constructor(scene, color='red') {\r\n        super(scene)\r\n\r\n  \t\tthis.posAABB = this.createAABB(128, 128, 128, 128)\r\n        this.radius = 32;\r\n        this.speed = 0.1;\r\n        this.velocity = 0.1;\r\n        this.direction = 1;\r\n        this.color = color;\r\n        this.target = null;\r\n\r\n        this.gameState = this.parent.gameState['bouncingBall'] = {x: this.posAABB.x, y: this.posAABB.y};\r\n        this.lastUpdate = this.gameState.y;\r\n    }\r\n\r\n  \tupdate(delta) {\r\n        this.gameState = this.parent.gameState['bouncingBall'];\r\n        // this.posAABB.setPos(this.gameState.x, this.gameState.y);\r\n\r\n        if (this.gameState.y == this.lastUpdate) {\r\n            // this.lastY = this.posAABB.canvasPos.y;\r\n            let y = this.posAABB.min.y + this.velocity * delta\r\n            this.posAABB.setPos(this.posAABB.x, y);\r\n\r\n            let canvasPos = this.posAABB.canvasPos;\r\n            if (canvasPos.y > 400 - 64 && this.velocity > 0) {\r\n                this.velocity = -this.velocity;\r\n            } else if (canvasPos.y < 32 && this.velocity < 0) {\r\n                this.velocity = -this.velocity;\r\n            }\r\n        } else {\r\n            this.lastUpdate = this.gameState.y;\r\n            this.posAABB.setPos(this.gameState.x, this.gameState.y);\r\n        }\r\n    }\r\n\r\n  \tdraw(interpolationPercentage) {\r\n        // Interpolate with the last position to reduce stuttering.\r\n        let canvasPos = this.posAABB.canvasPos\r\n        // var y = this.lastY + (canvasPos.y - this.lastY) * interpolationPercentage;\r\n        this.circle(this.scene.engine.context, canvasPos.x, canvasPos.y);\r\n  \t}\r\n\r\n    circle(context, x, y) {\r\n        context.beginPath();\r\n        context.arc(x, y, this.radius, 0, 2 * Math.PI, false);\r\n        context.fillStyle = this.color;\r\n        context.fill();\r\n        context.lineWidth = 1;\r\n        context.stroke();\r\n    }\r\n\r\n}\r\n\r\n\r\nexport default bouncingBallObject;","import { GameObject } from 'mini5-engine';\nimport { default as otherPlayerObject } from './otherPlayerObject'\n\nclass playerManagerObject extends GameObject {\n\n\tconstructor(scene) {\n\t    super(scene)\n      \tthis.scene = scene;\n  \t\tthis.update = this.update.bind(this);\n  \t\tthis.draw = this.draw.bind(this);\n\n        this.gameState = this.parent.gameState['playerManager'] = {};\n        this.connectedPlayers = {};\n\t}\n\n\tupdate(delta) {\n\t\tthis.gameState = this.parent.gameState['playerManager']\n\t\tfor (var name in this.gameState) {\n\t\t\tif (name in this.connectedPlayers) {\n\t\t\t\tthis.connectedPlayers[name].update(delta);\n\t\t\t} else {\n\t\t\t\tthis.connectedPlayers[name] = new otherPlayerObject(this.scene, name, this);\n\t\t\t}\n\t\t}\n\t}\n\n\tdraw(interpolationPercentage) {\n\t\tfor (var name in this.gameState) {\n\n\t\t\tif (name in this.connectedPlayers) {\n\t\t\t\tthis.connectedPlayers[name].draw(interpolationPercentage);\n\t\t\t}\n\t\t}\n\t}\n\n\t// addPlayer(socket) {\n\t// \tconsole.log(\"adding player object\" + socket.id)\n\t// \tlet username = this.count;\n\t// \tthis.count++;\n\t// \tthis.connectedPlayers.push(new playerObject(this.scene, socket, username, this))\n\t// }\n}\n\nexport default playerManagerObject;","import { GameObject } from 'mini5-engine';\r\n\r\nconst w = 87,\r\n\ta = 65,\r\n\ts = 83,\r\n\td = 68,\r\n\tspace = 32,\r\n\txDisp = 0,\r\n\tyDisp = 0;\r\n\r\nclass inputManagerObject extends GameObject {\r\n\r\n\tconstructor(scene) {\r\n\t    super(scene)\r\n  \t\tthis.inputState = {\r\n  \t\t\txState: 'idle',\r\n  \t\t\tyState: 'idle',\r\n  \t\t};\r\n  \t\tthis.sendUpdate = false;\r\n\t}\r\n\r\n\tupdate(delta) {\r\n\r\n\t\tvar prev_xState = this.inputState.xState;\r\n\t\tif (a in this.scene.engine.keyState && d in this.scene.engine.keyState) {\r\n\t\t\tthis.inputState.xState = 'idle';\r\n\t\t} else if (a in this.scene.engine.keyState) {\r\n\t\t\tthis.inputState.xState = 'movingLeft';\r\n\t\t} else if (d in this.scene.engine.keyState) {\r\n\t\t\tthis.inputState.xState = 'movingRight';\r\n\t\t} else {\r\n\t\t\tthis.inputState.xState = 'idle';\r\n\t\t}\r\n\t\tif (prev_xState != this.inputState.xState) {\r\n\t\t\tthis.sendUpdate = true;\r\n\t\t}\r\n\r\n\t\tvar prev_yState = this.inputState.yState;\r\n\t\tif (space in this.scene.engine.keyState) {\r\n\t\t\tthis.inputState.yState = 'jumping';\r\n\t\t} else {\r\n\t\t\tthis.inputState.yState = 'idle';\r\n\t\t}\r\n\t\tif (prev_yState != this.inputState.yState) {\r\n\t\t\tthis.sendUpdate = true;\r\n\t\t}\r\n\r\n\t\t// Send Updates to Server\r\n\t\tif (this.sendUpdate && this.scene.engine.mode === 'client') {\r\n\t\t\tthis.scene.engine.global.socket.emit('inputState', this.inputState);\r\n\t\t\tthis.sendUpdate = false;\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\nexport default inputManagerObject;","import testScene from './testScene'\r\n\r\nexport default {\r\n\t'testScene': testScene,\r\n}","import baseScene from './baseScene';\r\nimport {\r\n\tbackgroundObject,\r\n\tblockObject,\r\n\tplayerObject,\r\n\tportalObject,\r\n\tbouncingBallObject,\r\n\tplayerManagerObject,\r\n\tinputManagerObject\r\n} from '../gameObjects/'\r\n\r\nclass testScene extends baseScene {\r\n\r\n\tsetup(args) {\r\n\t\tsuper.setup(args);\r\n\r\n\t    // instantiate game objects\r\n\t    var background = new backgroundObject(this);\r\n\t    var ground = new blockObject(this, 800*2, 32, -800, 400 - 32);\r\n\t    var floating = new blockObject(this, 800/2, 32, 800/2, 400/2);\r\n\t    var ball = new bouncingBallObject(this, 'blue');\r\n\t    var player = new playerObject(this);\r\n\t    var portal = new portalObject(this, 'testScene', 96, 128, 640, 72);\r\n\r\n\t    // instantiate Manager objects\r\n\t    var playerManager = new playerManagerObject(this);\r\n\r\n\t    // create layers\r\n\t    this.layerOrder = ['layer1', 'layer2', 'layer3'];\r\n\t    this.layers = {\r\n\t    \t'layer1': [background],\r\n\t    \t'layer2': [ground, floating, ball, portal],\r\n\t    \t'layer3': [player, playerManager],\r\n\t    }\r\n\r\n\t    // create collision tag lists\r\n\t    this.staticObjects = [ground.AABB, floating.AABB];\r\n\t    this.portalObjects = [portal.AABB];\r\n\r\n\t    // add initial game objects\r\n\t    this.gameObjects = [background, player, ball, playerManager, portal];\r\n\t}\r\n\r\n}\r\n\r\nexport default testScene;","import { Scene } from 'mini5-engine';\r\n\r\nimport {\r\n\tinputManagerObject,\r\n} from '../gameObjects/'\r\n\r\nclass baseScene extends Scene {\r\n\r\n\tsetup(args) {\r\n\t\tthis.inputManager = new inputManagerObject(this);\r\n\t}\r\n\r\n\tupdate(delta) {\r\n\t\tthis.inputManager.update(delta);\r\n\t\tsuper.update(delta);\r\n\t}\r\n\r\n\tupdateSocket() {\r\n\t\tconsole.log('updated socket!');\r\n\t\tthis.engine.global.socket.on('gamestate', (data) => {\r\n\t\t\tthis.gameState = data;\r\n\t\t})\r\n\t}\r\n\r\n\tsceneFadeOut() {\r\n\t\tconsole.log('fading out');\r\n\t}\r\n\r\n}\r\n \r\nexport default baseScene;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// inputManager reads user input from the gameEngine\r\n// gameObject reads from inputManager and calculates inputState\r\n// networkManager reads the inputState and sends to the server","import { Engine } from 'mini5-engine';\r\nimport SceneList from './scenes/index'\r\n\r\nvar game = new Engine(SceneList, 'testScene', {}, null, process.env.REACT_APP_MODE);\r\n\r\nexport default game;\r\n// game.start();","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './ui/App';\nimport './ui/index.css';\nimport store from './store/store';\nimport { Provider } from 'react-redux';\nimport io from 'socket.io-client';\nimport Game from './game/main'\n\nconst MODE_LOCAL = 'local';\nconst MODE_CLIENT = 'client';\n\nasync function main() { \n  console.log(process.env.REACT_APP_MODE);\n\n  let starting_scene = 'testScene';\n\n  Game.forceSwitchScene(starting_scene, {});\n  let username = 'neil';\n\n  if (process.env.REACT_APP_MODE === MODE_CLIENT) {\n    username = await prompt(\"Please enter your name\", \"Harry Potter\");\n    let url = 'http://localhost:8081/gameserver?scene=' + starting_scene;\n    let socket = await setup_websocket(Game, url, username);\n    Game.global.socket = socket;\n    Game.currentScene.updateSocket();\n  }\n\n  Game.global.username = username;\n  Game.start();\n\n  ReactDOM.render(\n    <React.StrictMode>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\n\n// PERSISTENT WEB SOCKET FUNCTIONS\n// ... or all web socket functions?\n// whatever doesn't need to be cleared between client connections\n\n// returns socket object\nasync function setup_websocket(game, url, username) {\n  let response = await fetch(url);\n  let data = await response.json();\n\n  console.log(data.pathname)\n  let socket = await io(data.origin, {\n    path: data.pathname,\n    query:\"name=\" + username,\n  });\n\n  socket.on('connect', () => {\n    console.log(this);\n  });\n\n  socket.on('heartbeat', (data) => {\n    console.log(data);\n  });\n\n  // Things that interact with the scene can just be in base_scene class\n  socket.on('playerTeleportStart', (data) => {\n    // switch scene to transition scene\n    game.currentScene.sceneFadeOut();\n    // data includes which scene to switch to for preloading/transition data\n    game.global.nextScene = data.scene_name;\n    game.global.state = 'transitioning'\n    console.log(data);    \n  })\n\n  socket.on('playerTeleportDestination', async (data) => {\n    if (game.global.state != 'transitioning') {\n      return;\n    }\n    // data includes dest servers scene_name, origin, path to establish ws connection\n    // check if player in transition scene state\n    // send websocket connection request with server\n    // call connectToServer on new websocket(?)\n    // let newSocket = await setup_websocket(game, data.url, game.global.username);\n    let tempUrl = 'http://localhost:8081/gameserver?scene=' + game.global.nextScene;\n    let newSocket = await setup_websocket(game, tempUrl, game.global.username);\n    game.forceSwitchScene(game.global.nextScene, {});\n    game.global.oldSocket = game.global.socket;\n    game.global.socket = newSocket;\n    game.currentScene.updateSocket();\n    game.global.oldSocket.close();\n  })\n\n  console.log('new socket!');\n  console.log(socket);\n  return socket\n}\n\nasync function new_websocket(url, username) {\n}\n\nmain();"],"sourceRoot":""}